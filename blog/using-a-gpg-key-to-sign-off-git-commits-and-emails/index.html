<!doctype html>
<html lang="en">
<head>
    <!-- Meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Site info -->
    <title>Dries Vints</title>

    
            <meta property="article:published_time" content="2013-06-30T19:17" />
    
    <!-- Favicons -->
    <meta name="msapplication-TileColor" content="#2F3238">
    <meta name="msapplication-TileImage" content="/images/touch-icon-144×144-precomposed.png'">
    <link rel="apple-touch-icon-precomposed" sizes="152×152" href="/images/touch-icon-152×152-precomposed.png" />
    <link rel="apple-touch-icon-precomposed" sizes="144×144" href="/images/touch-icon-144×144-precomposed.png" />
    <link rel="apple-touch-icon-precomposed" sizes="120×120" href="/images/touch-icon-120×120-precomposed.png" />
    <link rel="apple-touch-icon-precomposed" sizes="114×114" href="/images/touch-icon-114×114-precomposed.png" />
    <link rel="apple-touch-icon-precomposed" sizes="72×72" href="/images/touch-icon-72×72-precomposed.png" />
    <link rel="apple-touch-icon-precomposed" href="/images/touch-icon-iphone-precomposed.png" />
    <link rel="icon" sizes="32x32" href="/images/favicon-32.png">
    <link rel="shortcut icon" href="/images/favicon.ico">

    <!-- Stylsheets -->
    <link media="all" type="text/css" rel="stylesheet" href='//fonts.googleapis.com/css?family=Lato:100,300,400,700,900,100italic,300italic,400italic,700italic,900italic|Source+Code+Pro:400,700'>
    <link media="all" type="text/css" rel="stylesheet" href="/css/app.css">

            <!-- Google Analytics -->
        <script type="text/javascript">
            var _gaq = _gaq || [];
            _gaq.push(['_setAccount', 'UA-18478762-2']);
            _gaq.push(['_trackPageview']);

            (function() {
                var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'stats.g.doubleclick.net/dc.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
            })();
        </script>
    </head>
<body>

<div id="content">
    <h1>Using a GPG Key to Sign-Off Git Commits and Emails</h1>

    <p>Ensuring that Git commits and Emails are your own can become a little troublesome. <a href="http://en.wikipedia.org/wiki/Email_spoofing">Email spoofing</a> is one of the easiest things to do these days and anyone can install Git with your username and email address <a href="http://stackoverflow.com/questions/3128993/is-there-some-way-to-fake-the-name-email-info-for-the-author-of-a-git-commit-t">to commit under your name</a>.<!--more--></p>
<p>While there isn't a way to stop people from pretending they're you there are a couple of ways that allow you to prove that spoofed commits and emails aren't yours. One of those ways is to sign your commits and emails with a <a href="http://www.gnupg.org/">GPG</a> key.</p>
<p>Since a GPG key is generated by yourself, on your own machine along with a passphrase, there is almost no way that it can be duplicated by someone else and thus providing a secure way to claim commits and emails as your own (or denying it if they haven't been signed off).</p>
<p>If you'd like to know more about GPG keys to secure your Git commits, you can read <a href="http://mikegerwitz.com/papers/git-horror-story.html">this absolutly great post</a> by <a href="http://mikegerwitz.com/">Mike Gerwitz</a>. I'm borrowing some code examples from it in this tutorial.</p>
<p>Warning: this tutorial is written for OS X.</p>
<h2>Generating a GPG Key</h2>
<p>To get started we first need to generate a GPG key. For OS X, there is a great tool which makes it dead-simple to install GPG keys on your machine. You can <a href="https://gpgtools.org/">download GPGTools here</a> (you can use <a href="http://gpg4win.org/">Gpg4win</a> if you're using Windows).</p>
<p>Follow the installation instructions to install GPGTools. After installing, you'll be prompted to generate a new GPG key. Fill in your full name and preferred email address (preferable the same which you're using for Git). Make sure to have &quot;Upload key after generation&quot; selected. Follow the remaining steps. Don't forget to remember the passphrase you'll be choosing to create the key.</p>
<p>After creating your key, you can list them by running the following command in your CLI.</p>
<pre><code class="language-bash">$ gpg --list-secret-keys | grep ^sec
sec   4096R/8EE30EAB 2011-06-16 [expires: 2014-04-18]
#           ^^^^^^^^</code></pre>
<h2>Configuring Git With the GPG Key</h2>
<p>Now that we have our key set up we should configure Git to use it when we sign our commits. Run the following command in your CLI. Please note that you have to replace the <code>8EE30EAB</code> part with your own code which you listed with the command above (marked with the <code>^^^^^^^^</code>).</p>
<pre><code class="language-bash">$ git config --global user.signingkey 8EE30EAB
#                                        ^ replace with your key id</code></pre>
<h2>Signing Commits</h2>
<p>We've added our GPG key to our Git configuration. Let's try signing a commit. Go to a local Git repository, make some changes, stage them and then run the following command.</p>
<pre><code class="language-bash">$ git commit -S -m 'Test commit of foo'

You need a passphrase to unlock the secret key for
user: "Mike Gerwitz (Free Software Developer) &lt;mike@mikegerwitz.com&gt;"
4096-bit RSA key, ID 8EE30EAB, created 2011-06-16

[master (root-commit) cf43808] Test commit of foo
 1 file changed, 1 insertion(+)
 create mode 100644 foo</code></pre>
<p>The <code>-S</code> flag (uppercase!) indicates that we're signing the commit with our GPG key. If you don't have <code>gpg-agent</code> running, you'll be prompted to enter the passphrase you choose for generating the key.</p>
<p>By default, Git won't show the GPG signature when running <code>git log</code>. To check if the commit was actually signed you can run the following command.</p>
<pre><code class="language-bash">$ git log --show-signature
commit cf43808e85399467885c444d2a37e609b7d9e99d
gpg: Signature made Fri 20 Apr 2012 11:59:01 PM EDT using RSA key ID 8EE30EAB
gpg: Good signature from "Mike Gerwitz (Free Software Developer) &lt;mike@mikegerwitz.com&gt;"
Author: Mike Gerwitz &lt;mike@mikegerwitz.com&gt;
Date:   Fri Apr 20 23:59:01 2012 -0400

    Test commit of foo</code></pre>
<p>Your Git commit is now signed with your GPG key, making sure it identifies you as its actual creator.</p>
<h2>Signing Emails in Mail</h2>
<p>When you installed the GPGTools a plugin for OS X mail should have been installed as well. When you now go to your Mail settings, a new preference panel for <a href="https://gpgtools.org/gpgmail/index.html">GPGMail</a> should have been added. Additionally, when you create a new email which you're sending from the email, some new options are available.</p>
<p><img src="/img/using-gpg-keys-to-sign-off-git-commits-and-emails-image-1.png" alt="" /></p>
<p>The new options allow you to encrypt and sign your email message. Encrypting the email will make sure it's securely transferred from you to the recipient. You can read more about encrypting emails <a href="http://support.gpgtools.org/kb/how-to/your-first-encrypted-mail">here</a>.</p>
<p>Signing off emails will verify you as the actual sender for the email message.</p>
<p><img src="/img/using-gpg-keys-to-sign-off-git-commits-and-emails-image-2.png" alt="" /></p>
<p><a href="https://gpgtools.org/gpgmail/index.html">Image courtesy of GPGTools</a></p>
<h2>Conclusion</h2>
<p>Using GPG keys will help you to make sure to identify yourself as the actual creator of your commits and email messages. This can help to prevent commit or email spoofing. While it will not stop others from attempting to spoof your emails or commits, you can prove the author of the spoofed items isn't you because you securely sign your emails and commits with your GPG key.</p>
<p>Some might argue that nothing prevents you not to sign your commits and emails in order to avoid responsibility for those commits and emails but then the problem actually lies on the other side with the maintainer of a project or the receiver of your emails. If you want to make sure that you can verify persons as the creators of the commits which you're merging into your project or verify persons as the actual senders of an email message then you should require those persons to sign off the commits and emails with a GPG key. There are a number of ways for requiring this but I won't go into those in this post.</p>
<p>If you'd like to learn more securely signing Git commits I (again) highly recommend <a href="http://mikegerwitz.com/papers/git-horror-story.html">this post</a> by <a href="http://mikegerwitz.com/">Mike Gerwitz</a>.</p></div>

<script src="/js/all.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

</body>
</html>
